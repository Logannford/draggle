generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "postgresql"
	url 					= env("NEXT_PRIVATE_DATABASE_URL")
	directUrl 		= env("NEXT_PRIVATE_DIRECT_DATABASE_URL")
}

enum planType {
  FREE
  BASIC
  PREMIUM
}

// defines the user data model
model User {
  uid                                         String @id @default(uuid())
  email                                       String @unique
  firstName                                   String?
  lastName                                    String?

  websites                                    Website[]

  subscription                                Subscription?

  createdAt                                   DateTime @default(now())
  updatedAt                                   DateTime @updatedAt
}

model Subscription {
  // A 1-1 relation between a user and their subscription
  // link the transactionId to the user
  User                                        User   @relation(fields: [transactionId], references: [uid])
  transactionId                               String @id @unique

  subscriptionActive                          Boolean
  paymentEmail                                String
  planType                                    planType // enum
  dateOfPurchase                              String
  dateOfExpiry                                String
  test                                        Boolean
}

model Website {
  id                                          String @id @default(uuid())
  owner                                       User @relation(fields: [id], references: [uid])
  url                                         String
  title                                       String
  description                                 String
  code                                        String
  createdAt                                   DateTime @default(now())
  updatedAt                                   DateTime @updatedAt
}